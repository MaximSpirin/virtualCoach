<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dash line demo</title>
</head>
<body onload="init()">
    <script type="text/javascript" src="js/external/createjs/easeljs-0.8.1.combined.js"></script>
    <script src="js/view/pitch/SizeHint.js"></script>
    <script src="js/view/tools/RotationTool.js"></script>

    <script>
        function init(){
            //init easeljs stage
            window.stage = new createjs.Stage("appCanvas");
            createjs.Ticker.on("tick", handleTick, this);
            function handleTick(event) {
                stage.update();
            }

            var rotationTarget = new createjs.Shape();
            rotationTarget.x = 200;
            rotationTarget.y = 200;
            rotationTarget.graphics.beginFill("#00FF00").drawRect(-25,-25,50,50);
            rotationTarget.setBounds(0,0,50,50);
            window.stage.addChild(rotationTarget);


            var handler = new createjs.Shape();
            handler.setBounds(0,0,30,30);
            handler.graphics.beginFill("#FF0000");
            handler.cursor = "pointer";
            handler.graphics.drawCircle(0,0,15);

            var rotationTool = new RotationTool(rotationTarget.getBounds().width/2 + 5,rotationTarget.getBounds().width/2+5,handler,0);
            rotationTool.x = rotationTarget.x;
            rotationTool.y = rotationTarget.y;
            rotationTool.on("change", function(event){
                rotationTarget.rotation = rotationTool.angle;
                //console.log("Rotate to:"+rotationTool.angle);
            }, this);
            window.stage.addChild(rotationTool);

            /*var startPoint = new createjs.Point(30, 100);
            var controlPoint1 = new createjs.Point(40, 120);
            var controlPoint2 = new createjs.Point(80, 120);
            var endPoint = new createjs.Point(90, 100);
                
            var shape = new createjs.Shape();
            window.shape = shape;
            window.stage.addChild(shape);

            shape.graphics.beginFill("#ff0000");
            shape.graphics.drawCircle(startPoint.x, startPoint.y, 5);
            shape.graphics.endFill();

            shape.graphics.beginFill("#00ff00");
            shape.graphics.drawCircle(endPoint.x, endPoint.y, 5);
            shape.graphics.endFill();

            shape.graphics.setStrokeStyle(3).beginStroke("#000000").moveTo(startPoint.x, startPoint.y).bezierCurveTo(controlPoint1.x,
                                                                                                                        controlPoint1.y,
                                                                                                                        controlPoint2.x,
                                                                                                                        controlPoint2.y,
                                                                                                                        endPoint.x,
                                                                                                                        endPoint.y);
            updateArrowPositionAndRotation(Math.atan2((endPoint.y - controlPoint2.y),(endPoint.x - controlPoint2.x)),
                    endPoint.x, endPoint.y);




            function updateArrowPositionAndRotation(radian, x, y) {
                var arrow = new createjs.Shape();
                arrow.graphics.beginStroke("#000000").moveTo(-5, +5).lineTo(0, 0).lineTo(-5, -5);

               // arrow.graphics.beginFill("#0000FF").drawCircle(0,0,5);

                var degree = radian / Math.PI * 180;
                arrow.x = x ;
                arrow.y = y ;
                arrow.rotation = degree;

                stage.addChild(arrow);
            }*/
        }



    </script>

    <!-- app container -->
    <div id="appContainer">
        <canvas id="appCanvas" width="800" height="600">

        </canvas>
    </div>
</body>
</html>